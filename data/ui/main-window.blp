using Gtk 4.0;
using Adw 1;

template $TunerMainWindow : Adw.ApplicationWindow {
    default-width: 800;
    default-height: 600;
    title: _("Tuner");
    
    Adw.Breakpoint {
        condition ("max-width: 550sp")

        setters {
            split_view.collapsed: true;
        }
    }

    Adw.ToastOverlay toast_overlay {

        Stack stack {
            StackPage {
                name: "empty";

                child: Adw.ToolbarView {
                    [top]
                    Adw.HeaderBar {
                        [end]
                        Button {
                            styles [ "flat" ]

                            icon-name: "about-symbolic";
                            action-name: "app.about";
                        }
                    }

                    content: Adw.StatusPage {
                        title: _("No plugins found");
                        description: _("You can open the app page in the software store. There should be a list of available plugins");
                        icon-name: "org.altlinux.Tuner-symbolic";

                        Box {
                            orientation: horizontal;
                            halign: center;

                            styles [ "linked" ]

                            Button {
                                styles [ "suggested-action", "pill" ]

                                label: _("Open app page");
                                action-name: "app.open-app-page";
                            }

                            Button {
                                styles [ "pill" ]

                                icon-name: "view-refresh-symbolic";
                                tooltip-text: _("Load new plugins");
                                action-name: "app.reload-extensions";
                            }
                        }
                    };
                };
            }

            StackPage {
                name: "content";

                child: Adw.NavigationSplitView split_view {
                    sidebar: Adw.NavigationPage {
                        title: _("Tuner");

                        child: Adw.ToolbarView {
                            
                            [top]
                            Adw.HeaderBar {
                                
                                [end]
                                MenuButton {
                                    primary: true;
                                    icon-name: "open-menu-symbolic";
                                    tooltip-text: _("Main Menu");
                                    menu-model: primary_menu;
                                }
                            }

                            ListBox panels_list_box {
                                styles [ "navigation-sidebar" ]

                                row-activated => $set_page();
                            }
                        };
                    };
                };
            }
        }
    }
}

menu primary_menu {
    section {
        item {
            label: _("_Update plugins list");
            action: "app.reload-extensions";
        }
        item {
            label: _("_Install plugins");
            action: "app.open-app-page";
        }
        item {
            label: _("_About Tuner");
            action: "app.about";
        }
    }
}
